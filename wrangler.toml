name = "base7-website"
compatibility_date = "2024-01-01"

[env.production]
name = "base7-website"
route = "base7.tech/*"

[env.preview]
name = "base7-website-preview"

# Build configuration
[build]
command = "npm run build"
publish = "dist"
node_version = "18"

# Environment variables (if needed)
[vars]
NODE_ENV = "production"

# Custom headers for better performance
[[headers]]
for = "/*"
[headers.values]
"X-Frame-Options" = "DENY"
"X-Content-Type-Options" = "nosniff"
"Referrer-Policy" = "strict-origin-when-cross-origin"
"Permissions-Policy" = "camera=(), microphone=(), geolocation=()"

# Cache static assets
[[headers]]
for = "/assets/*"
[headers.values]
"Cache-Control" = "public, max-age=31536000, immutable"

# Cache images
[[headers]]
for = "*.{png,jpg,jpeg,gif,webp,svg,ico}"
[headers.values]
"Cache-Control" = "public, max-age=31536000"

# Cache fonts
[[headers]]
for = "*.{woff,woff2,ttf,eot}"
[headers.values]
"Cache-Control" = "public, max-age=31536000"
"Access-Control-Allow-Origin" = "*"